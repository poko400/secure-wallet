
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Secure Web3 Wallet</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
</head>
<body>
  <h2>Secure Web3 Wallet</h2>
  <button id="connectButton">Connect Wallet</button>
  <div id="walletInfo"></div>
  <input type="number" id="depositAmount" placeholder="Amount to deposit (ETH)" />
  <button id="depositButton" disabled>Deposit</button>
  <input type="number" id="withdrawAmount" placeholder="Amount to withdraw (ETH)" />
  <button id="withdrawButton" disabled>Withdraw</button>
  <div id="status"></div>

  <script>
    const contractAddress = "0xd258CbA4107626bd6EdbD26fFF9f981f6521A0ED";
    const contractABI = [
      {"inputs":[],"stateMutability":"nonpayable","type":"constructor"},
      {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Deposit","type":"event"},
      {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdrawal","type":"event"},
      {"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balances","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
      {"inputs":[],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},
      {"inputs":[],"name":"destroy","outputs":[],"stateMutability":"nonpayable","type":"function"},
      {"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
      {"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},
      {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}
    ];

    let provider, signer, contract, userAddress;

    async function connectWallet() {
      if (!window.ethereum) {
        alert("Please install MetaMask to use this feature.");
        return;
      }
      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      userAddress = accounts[0];
      provider = new ethers.providers.Web3Provider(window.ethereum);
      signer = provider.getSigner();
      contract = new ethers.Contract(contractAddress, contractABI, signer);
      document.getElementById("walletInfo").innerText = "Connected: " + userAddress;
      document.getElementById("depositButton").disabled = false;
      document.getElementById("withdrawButton").disabled = false;
    }

    async function deposit() {
      const amount = document.getElementById("depositAmount").value;
      const tx = await contract.deposit({ value: ethers.utils.parseEther(amount) });
      await tx.wait();
      document.getElementById("status").innerText = "Deposit successful";
    }

    async function withdraw() {
      const amount = document.getElementById("withdrawAmount").value;
      const tx = await contract.withdraw(ethers.utils.parseEther(amount));
      await tx.wait();
      document.getElementById("status").innerText = "Withdraw successful";
    }

    document.getElementById("connectButton").onclick = connectWallet;
    document.getElementById("depositButton").onclick = deposit;
    document.getElementById("withdrawButton").onclick = withdraw;
  </script>
</body>
</html>
